<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>会员详情</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.5.4/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
    <link rel="stylesheet" href="../lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="stylesheet" href="../lib/jq-module/zyupload/zyupload-1.0.0.min.css" media="all">
    
<style type="text/css">
.caller-img{

width: 40px;
    height: 40px;
    border-radius: 100%;

}

.icon {
    margin-right: 10px;
  
}

.layui-card {
    border: 1px solid #f2f2f2;
    border-radius: 5px;
}



</style>
</head>
<body>
<div class="layuimini-container">

    <div class="layuimini-main">
        <div class="layui-form-item" style="">
<button type="button" class="layui-btn layui-btn-danger data-add-cancel "><i class="fa fa-remove icon"></i>关闭</button></div>

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>【会员信息】</legend>
        </fieldset>


<div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">会员头像:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;">
                    <img src="https://www.layui.com/admin/std/dist/layuiadmin/style/res/template/portrait.png" alt="" class="caller-img caller-f" id="avatar">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label">姓名:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="realName"></div>
                </div>

                <div class="layui-inline">
                   <label class="layui-form-label">微信昵称:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="nickName"></div>
                </div>
            </div>

            <div class="layui-form-item">

                    <div class="layui-inline">
                    <label class="layui-form-label">性别:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="sex">男</div>
                    </div>

                    <div class="layui-inline">
                    <label class="layui-form-label">年龄:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="age">25</div>
                    </div>

                    <div class="layui-inline">
                    <label class="layui-form-label">出生日期:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="birth">1987-09-30</div>
                    </div>

            </div>


             <div class="layui-form-item">

                    <div class="layui-inline">
                    <label class="layui-form-label">注册时间:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="regTime">2019-10-21</div>
                    </div>

                    <div class="layui-inline">
                    <label class="layui-form-label">手机号：</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="phone">18015803234</div>
                    </div>

                    <div class="layui-inline">
                    <label class="layui-form-label">身份证号:</label>
                    <div class="layui-input-inline" style="line-height: 38px; width:90px;" id="idCard">320481198709305333</div>
                    </div>

            </div>
            <div id="cardInfo"></div>
    </div>
</div>

<script src="../lib/jquery-3.4.1/jquery-3.4.1.min.js" charset="utf-8"></script>
<script src="../lib/layui-v2.5.4/layui.js" charset="utf-8"></script>
<script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script type="text/javascript">
    $(".data-add-cancel").on("click", function () {
       window.location.href="hy-table.html"
    });

    var router = layui.router(); var id = router.search.id;
    $.get("/admin/?p=index&getUserInfo=1&id="+id, function(data){
        data=JSON.parse(data);
        $("img#avatar")[0].src=data.avatar;
        $("#realName").html(data.realName);
        $("#nickName").html(data.nickName);
        $("#sex").html(data.sex);
        $("#age").html(data.age);
        $("#birth").html(data.birth);
        $("#regTime").html(data.regTime);
        $("#phone").html(data.phone);
        $("#idCard").html(data.idCard);
        for(i in data.cardInfo){
            var info=data.cardInfo[i];
            var logHtml="",i=1;
            for(j in info.usedLog){
                var log=info.usedLog[j];
                switch(log.state){//0 已预约 1 已确认 2 已取消 3 已入住 4 超时未入住
                    case "0":
                        log.state="已预约";
                        break;
                    case "1":
                        log.state="已确认";
                        break;
                    case "2":
                        log.state="已取消";
                        break;
                    case "3":
                        log.state="已入住";
                        break;
                    case "4":
                        log.state="超时未入住";
                        break;
                    default:
                        break;
                }
                logHtml+=('<div class="layui-inline"><label class="layui-form-label">'+(i++)+'</label><div class="layui-input-inline" style="line-height: 38px; width:160px;">'+log.name+'</div><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+log.type+'</div><div class="layui-input-inline" style="line-height: 38px; width:120px;">'+log.startTime+'</div><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+log.state+'</div> </div>');
            }
            $("#cardInfo").append('<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;"><legend>【'+info.type+'信息】</legend></fieldset><div class="layui-form-item"><div class="layui-inline"><label class="layui-form-label">激活时间:</label><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+info.activeTime+'</div></div><div class="layui-inline"><label class="layui-form-label">卡片ID:</label><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+info.cardID+'</div></div><div class="layui-inline"><label class="layui-form-label">卡片状态:</label><div class="layui-input-inline" style="line-height: 38px; width:200px;">'+info.state+'</div></div></div><div class="layui-form-item"><div class="layui-inline"><label class="layui-form-label">卡片有效期:</label><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+info.cardValid+'</div></div><div class="layui-inline"><label class="layui-form-label">剩余次数:</label><div class="layui-input-inline" style="line-height: 38px; width:90px;">'+info.leftTimes+'</div></div></div><div class="layui-card"><div class="layui-card-header"><i class="fa fa-paper-plane-o icon"></i>使用记录</div><div class="layui-form-item">'+logHtml+'</div></div>');
        }
    });
</script>




</body>
</html>